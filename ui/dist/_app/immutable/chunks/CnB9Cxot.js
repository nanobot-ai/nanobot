import{W as oe,P as B,aF as we,D as F,n as E,F as ye,v as ie,i as P,ac as Ve,R as Je,T as Ye,U as de,V as M,y as N,C as Be,aG as xe,X as R,_ as Ke,aH as x,aI as K,Y as $,aJ as he,a3 as Qe,aC as ve,aK as Ee,aL as me,a0 as le,a1 as Ce,aM as Xe,aN as G,q as Ge,aO as L,aP as Ze,z as et,aQ as tt,aR as rt,aS as st,w as Ie,aT as it,Q as at,aU as nt,B as ot,aV as lt,aW as ge,e as fe,aX as ft,aY as ut,a6 as ct,aZ as ue,a_ as dt,a$ as ht,b0 as vt,b1 as gt,b2 as _t,b3 as bt,b4 as St,b5 as pt,ar as wt,av as yt,b6 as Et,Z as mt,b7 as Ct,b8 as It,b9 as At,aA as Tt,u as Ae,r as Te,ba as Nt,p as Ne,as as kt,an as ke,g as ae,c as Oe,l as Ot,s as Mt,a2 as Me,m as $t,d as $e,f as Pe,j as Pt,bb as Rt,bc as Lt,bd as Ut}from"./TV9P7kG6.js";import"./DsnmJJEf.js";import{p as z,r as Re,s as zt}from"./DJGld0fm.js";function Dt(e,t){return t}function jt(e,t,r){for(var s=e.items,i=[],a=t.length,n=0;n<a;n++)tt(t[n].e,i,!0);var o=a>0&&i.length===0&&r!==null;if(o){var h=r.parentNode;rt(h),h.append(r),s.clear(),T(e,t[0].prev,t[a-1].next)}st(i,()=>{for(var l=0;l<a;l++){var v=t[l];o||(s.delete(v.k),T(e,v.prev,v.next)),L(v.e,!o)}})}function qt(e,t,r,s,i,a=null){var n=e,o={flags:t,items:new Map,first:null},h=(t&we)!==0;if(h){var l=e;n=E?F(ye(l)):l.appendChild(oe())}E&&ie();var v=null,g=!1,c=new Map,m=Ve(()=>{var S=r();return me(S)?S:S==null?[]:Ee(S)}),f,_;function p(){Ft(_,f,o,c,n,i,t,s,r),a!==null&&(f.length===0?v?le(v):v=R(()=>a(n)):v!==null&&Ce(v,()=>{v=null}))}B(()=>{_??=Ie,f=P(m);var S=f.length;if(g&&S===0)return;g=S===0;let C=!1;if(E){var b=Je(n)===Ye;b!==(S===0)&&(n=de(),F(n),M(!1),C=!0)}if(E){for(var w=null,y,u=0;u<S;u++){if(N.nodeType===Be&&N.data===xe){n=N,C=!0,M(!1);break}var d=f[u],I=s(d,u);y=ne(N,o,w,null,d,I,u,i,t,r),o.items.set(I,y),w=y}S>0&&F(de())}if(E)S===0&&a&&(v=R(()=>a(n)));else if(Ke()){var k=new Set,H=$;for(u=0;u<S;u+=1){d=f[u],I=s(d,u);var O=o.items.get(I)??c.get(I);O?(t&(x|K))!==0&&Le(O,d,u,t):(y=ne(null,o,null,null,d,I,u,i,t,r,!0),c.set(I,y)),k.add(I)}for(const[A,V]of o.items)k.has(A)||H.skipped_effects.add(V.e);H.add_callback(p)}else p();C&&M(!0),P(m)}),E&&(n=N)}function Ft(e,t,r,s,i,a,n,o,h){var l=(n&Ze)!==0,v=(n&(x|K))!==0,g=t.length,c=r.items,m=r.first,f=m,_,p=null,S,C=[],b=[],w,y,u,d;if(l)for(d=0;d<g;d+=1)w=t[d],y=o(w,d),u=c.get(y),u!==void 0&&(u.a?.measure(),(S??=new Set).add(u));for(d=0;d<g;d+=1){if(w=t[d],y=o(w,d),u=c.get(y),u===void 0){var I=s.get(y);if(I!==void 0){s.delete(y),c.set(y,I);var k=p?p.next:f;T(r,p,I),T(r,I,k),Z(I,k,i),p=I}else{var H=f?f.e.nodes_start:i;p=ne(H,r,p,p===null?r.first:p.next,w,y,d,a,n,h)}c.set(y,p),C=[],b=[],f=p.next;continue}if(v&&Le(u,w,d,n),(u.e.f&G)!==0&&(le(u.e),l&&(u.a?.unfix(),(S??=new Set).delete(u))),u!==f){if(_!==void 0&&_.has(u)){if(C.length<b.length){var O=b[0],A;p=O.prev;var V=C[0],Q=C[C.length-1];for(A=0;A<C.length;A+=1)Z(C[A],O,i);for(A=0;A<b.length;A+=1)_.delete(b[A]);T(r,V.prev,Q.next),T(r,p,V),T(r,Q,O),f=O,p=Q,d-=1,C=[],b=[]}else _.delete(u),Z(u,f,i),T(r,u.prev,u.next),T(r,u,p===null?r.first:p.next),T(r,p,u),p=u;continue}for(C=[],b=[];f!==null&&f.k!==y;)(f.e.f&G)===0&&(_??=new Set).add(f),b.push(f),f=f.next;if(f===null)continue;u=f}C.push(u),p=u,f=u.next}if(f!==null||_!==void 0){for(var U=_===void 0?[]:Ee(_);f!==null;)(f.e.f&G)===0&&U.push(f),f=f.next;var X=U.length;if(X>0){var We=(n&we)!==0&&g===0?i:null;if(l){for(d=0;d<X;d+=1)U[d].a?.measure();for(d=0;d<X;d+=1)U[d].a?.fix()}jt(r,U,We)}}l&&Ge(()=>{if(S!==void 0)for(u of S)u.a?.apply()}),e.first=r.first&&r.first.e,e.last=p&&p.e;for(var He of s.values())L(He.e);s.clear()}function Le(e,t,r,s){(s&x)!==0&&he(e.v,t),(s&K)!==0?he(e.i,r):e.i=r}function ne(e,t,r,s,i,a,n,o,h,l,v){var g=(h&x)!==0,c=(h&Xe)===0,m=g?c?Qe(i,!1,!1):ve(i):i,f=(h&K)===0?n:ve(n),_={i:f,v:m,k:a,a:null,e:null,prev:r,next:s};try{if(e===null){var p=document.createDocumentFragment();p.append(e=oe())}return _.e=R(()=>o(e,m,f,l),E),_.e.prev=r&&r.e,_.e.next=s&&s.e,r===null?v||(t.first=_):(r.next=_,r.e.next=_.e),s!==null&&(s.prev=_,s.e.prev=_.e),_}finally{}}function Z(e,t,r){for(var s=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==null&&a!==s;){var n=et(a);i.before(a),a=n}}function T(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Wt(e,t,r,s,i,a){let n=E;E&&ie();var o,h,l=null;E&&N.nodeType===it&&(l=N,ie());var v=E?N:e,g;B(()=>{const c=t()||null;var m=nt;c!==o&&(g&&(c===null?Ce(g,()=>{g=null,h=null}):c===h?le(g):(L(g),ge(!1))),c&&c!==h&&(g=R(()=>{if(l=E?l:document.createElementNS(m,c),ot(l,l),s){E&&lt(c)&&l.append(document.createComment(""));var f=E?ye(l):l.appendChild(oe());E&&(f===null?M(!1):F(f)),s(l,f)}Ie.nodes_end=l,v.before(l)})),o=c,o&&(h=o),ge(!0))},at),n&&(M(!0),F(v))}function Ht(e,t){var r=void 0,s;B(()=>{r!==(r=t())&&(s&&(L(s),s=null),r&&(s=R(()=>{fe(()=>r(e))})))})}function Ue(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=Ue(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function Vt(){for(var e,t,r=0,s="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=Ue(e))&&(s&&(s+=" "),s+=t);return s}function Jt(e){return typeof e=="object"?Vt(e):e??""}const _e=[...` 	
\r\fÂ \v\uFEFF`];function Yt(e,t,r){var s=e==null?"":""+e;if(r){for(var i in r)if(r[i])s=s?s+" "+i:i;else if(s.length)for(var a=i.length,n=0;(n=s.indexOf(i,n))>=0;){var o=n+a;(n===0||_e.includes(s[n-1]))&&(o===s.length||_e.includes(s[o]))?s=(n===0?"":s.substring(0,n))+s.substring(o+1):n=o}}return s===""?null:s}function be(e,t=!1){var r=t?" !important;":";",s="";for(var i in e){var a=e[i];a!=null&&a!==""&&(s+=" "+i+": "+a+r)}return s}function ee(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Bt(e,t){if(t){var r="",s,i;if(Array.isArray(t)?(s=t[0],i=t[1]):s=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,n=0,o=!1,h=[];s&&h.push(...Object.keys(s).map(ee)),i&&h.push(...Object.keys(i).map(ee));var l=0,v=-1;const _=e.length;for(var g=0;g<_;g++){var c=e[g];if(o?c==="/"&&e[g-1]==="*"&&(o=!1):a?a===c&&(a=!1):c==="/"&&e[g+1]==="*"?o=!0:c==='"'||c==="'"?a=c:c==="("?n++:c===")"&&n--,!o&&a===!1&&n===0){if(c===":"&&v===-1)v=g;else if(c===";"||g===_-1){if(v!==-1){var m=ee(e.substring(l,v).trim());if(!h.includes(m)){c!==";"&&g++;var f=e.substring(l,g).trim();r+=" "+f+";"}}l=g+1,v=-1}}}}return s&&(r+=be(s)),i&&(r+=be(i,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function xt(e,t,r,s,i,a){var n=e.__className;if(E||n!==r||n===void 0){var o=Yt(r,s,a);(!E||o!==e.getAttribute("class"))&&(o==null?e.removeAttribute("class"):t?e.className=o:e.setAttribute("class",o)),e.__className=r}else if(a&&i!==a)for(var h in a){var l=!!a[h];(i==null||l!==!!i[h])&&e.classList.toggle(h,l)}return a}function te(e,t={},r,s){for(var i in r){var a=r[i];t[i]!==a&&(r[i]==null?e.style.removeProperty(i):e.style.setProperty(i,a,s))}}function Kt(e,t,r,s){var i=e.__style;if(E||i!==t){var a=Bt(t,s);(!E||a!==e.getAttribute("style"))&&(a==null?e.removeAttribute("style"):e.style.cssText=a),e.__style=t}else s&&(Array.isArray(s)?(te(e,r?.[0],s[0]),te(e,r?.[1],s[1],"important")):te(e,r,s));return s}function J(e,t,r=!1){if(e.multiple){if(t==null)return;if(!me(t))return ft();for(var s of e.options)s.selected=t.includes(W(s));return}for(s of e.options){var i=W(s);if(ut(i,t)){s.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function ze(e){var t=new MutationObserver(()=>{J(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ct(()=>{t.disconnect()})}function nr(e,t,r=t){var s=!0;ue(e,"change",i=>{var a=i?"[selected]":":checked",n;if(e.multiple)n=[].map.call(e.querySelectorAll(a),W);else{var o=e.querySelector(a)??e.querySelector("option:not([disabled])");n=o&&W(o)}r(n)}),fe(()=>{var i=t();if(J(e,i,s),s&&i===void 0){var a=e.querySelector(":checked");a!==null&&(i=W(a),r(i))}e.__value=i,s=!1}),ze(e)}function W(e){return"__value"in e?e.__value:e.value}const D=Symbol("class"),j=Symbol("style"),De=Symbol("is custom element"),je=Symbol("is html");function or(e){if(E){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var s=e.value;Y(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var i=e.checked;Y(e,"checked",null),e.checked=i}}};e.__on_r=r,It(r),At()}}function lr(e,t){var r=ce(e);r.checked!==(r.checked=t??void 0)&&(e.checked=t)}function Qt(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Y(e,t,r,s){var i=ce(e);E&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=r)&&(t==="loading"&&(e[ht]=r),r==null?e.removeAttribute(t):typeof r!="string"&&qe(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Xt(e,t,r,s,i=!1){var a=ce(e),n=a[De],o=!a[je];let h=E&&n;h&&M(!1);var l=t||{},v=e.tagName==="OPTION";for(var g in t)g in r||(r[g]=null);r.class?r.class=Jt(r.class):r[D]&&(r.class=null),r[j]&&(r.style??=null);var c=qe(e);for(const b in r){let w=r[b];if(v&&b==="value"&&w==null){e.value=e.__value="",l[b]=w;continue}if(b==="class"){var m=e.namespaceURI==="http://www.w3.org/1999/xhtml";xt(e,m,w,s,t?.[D],r[D]),l[b]=w,l[D]=r[D];continue}if(b==="style"){Kt(e,w,t?.[j],r[j]),l[b]=w,l[j]=r[j];continue}var f=l[b];if(!(w===f&&!(w===void 0&&e.hasAttribute(b)))){l[b]=w;var _=b[0]+b[1];if(_!=="$$")if(_==="on"){const y={},u="$$"+b;let d=b.slice(2);var p=Ct(d);if(St(d)&&(d=d.slice(0,-7),y.capture=!0),!p&&f){if(w!=null)continue;e.removeEventListener(d,l[u],y),l[u]=null}if(w!=null)if(p)e[`__${d}`]=w,wt([d]);else{let I=function(k){l[b].call(this,k)};l[u]=pt(d,e,I,y)}else p&&(e[`__${d}`]=void 0)}else if(b==="style")Y(e,b,w);else if(b==="autofocus")yt(e,!!w);else if(!n&&(b==="__value"||b==="value"&&w!=null))e.value=e.__value=w;else if(b==="selected"&&v)Qt(e,w);else{var S=b;o||(S=Et(S));var C=S==="defaultValue"||S==="defaultChecked";if(w==null&&!n&&!C)if(a[b]=null,S==="value"||S==="checked"){let y=e;const u=t===void 0;if(S==="value"){let d=y.defaultValue;y.removeAttribute(S),y.defaultValue=d,y.value=y.__value=u?d:null}else{let d=y.defaultChecked;y.removeAttribute(S),y.defaultChecked=d,y.checked=u?d:!1}}else e.removeAttribute(b);else C||c.includes(S)&&(n||typeof w!="string")?(e[S]=w,S in a&&(a[S]=mt)):typeof w!="function"&&Y(e,S,w)}}}return h&&M(!0),l}function Se(e,t,r=[],s=[],i,a=!1){dt(r,s,n=>{var o=void 0,h={},l=e.nodeName==="SELECT",v=!1;if(B(()=>{var c=t(...n.map(P)),m=Xt(e,o,c,i,a);v&&l&&"value"in c&&J(e,c.value);for(let _ of Object.getOwnPropertySymbols(h))c[_]||L(h[_]);for(let _ of Object.getOwnPropertySymbols(c)){var f=c[_];_.description===_t&&(!o||f!==o[_])&&(h[_]&&L(h[_]),h[_]=R(()=>Ht(e,()=>f))),m[_]=f}o=m}),l){var g=e;fe(()=>{J(g,o.value,!0),ze(g)})}v=!0})}function ce(e){return e.__attributes??={[De]:e.nodeName.includes("-"),[je]:e.namespaceURI===vt}}var pe=new Map;function qe(e){var t=e.getAttribute("is")||e.nodeName,r=pe.get(t);if(r)return r;pe.set(t,r=[]);for(var s,i=e,a=Element.prototype;a!==i;){s=bt(i);for(var n in s)s[n].set&&r.push(n);i=gt(i)}return r}function fr(e,t,r=t){var s=new WeakSet;ue(e,"input",async i=>{var a=i?e.defaultValue:e.value;if(a=re(e)?se(a):a,r(a),$!==null&&s.add($),await Tt(),a!==(a=t())){var n=e.selectionStart,o=e.selectionEnd;e.value=a??"",o!==null&&(e.selectionStart=n,e.selectionEnd=Math.min(o,e.value.length))}}),(E&&e.defaultValue!==e.value||Ae(t)==null&&e.value)&&(r(re(e)?se(e.value):e.value),$!==null&&s.add($)),Te(()=>{var i=t();if(e===document.activeElement){var a=Nt??$;if(s.has(a))return}re(e)&&i===se(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function ur(e,t,r=t){ue(e,"change",s=>{var i=s?e.defaultChecked:e.checked;r(i)}),(E&&e.defaultChecked!==e.checked||Ae(t)==null)&&r(e.checked),Te(()=>{var s=t();e.checked=!!s})}function re(e){var t=e.type;return t==="number"||t==="range"}function se(e){return e===""?null:+e}/**
 * @license @lucide/svelte v0.540.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 * ---
 * 
 * The MIT License (MIT) (for portions derived from Feather)
 * 
 * Copyright (c) 2013-2023 Cole Bemis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const Gt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Zt=kt("<svg><!><!></svg>");function er(e,t){Ne(t,!0);const r=z(t,"color",3,"currentColor"),s=z(t,"size",3,24),i=z(t,"strokeWidth",3,2),a=z(t,"absoluteStrokeWidth",3,!1),n=z(t,"iconNode",19,()=>[]),o=Re(t,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var h=Zt();Se(h,g=>({...Gt,...o,width:s(),height:s(),stroke:r(),"stroke-width":g,class:["lucide-icon lucide",t.name&&`lucide-${t.name}`,t.class]}),[()=>a()?Number(i())*24/Number(s()):i()]);var l=Ot(h);qt(l,17,n,Dt,(g,c)=>{var m=Pt(()=>Rt(P(c),2));let f=()=>P(m)[0],_=()=>P(m)[1];var p=$e(),S=Pe(p);Wt(S,f,!0,(C,b)=>{Se(C,()=>({..._()}))}),ae(g,p)});var v=Mt(l);ke(v,()=>t.children??Me),$t(h),ae(e,h),Oe()}function cr(e,t){Ne(t,!0);/**
 * @license @lucide/svelte v0.540.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Re(t,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];er(e,zt({name:"x"},()=>r,{get iconNode(){return s},children:(i,a)=>{var n=$e(),o=Pe(n);ke(o,()=>t.children??Me),ae(i,n)},$$slots:{default:!0}})),Oe()}const dr="application/vnd.nanobot.workspace+json",tr="/mcp?ui",Fe=Symbol("notifications");function hr(e){Ut(Fe,e)}function rr(){return Lt(Fe)}function q(e){try{rr().error("API Error",e?.toString())}catch{console.error("MCP Tool Error:",e)}console.error("Error:",e)}class vr{#t;#i;#r;#a;#n;#o;#e;#s=new Map;constructor(t){const r=t?.baseUrl||"",s=t?.path||tr;if(this.#t=`${r}${s}`,this.#i=t?.fetcher||fetch,t?.sessionId)this.#r=t.sessionId==="new"?void 0:t.sessionId,this.#o=!0;else{const i=this.#u();i&&(this.#r=i.sessionId,this.#a=i.initializeResult),this.#o=!1}}async deleteSession(){try{if(!this.#r)return;await this.#i(this.#t,{method:"DELETE",headers:{"Mcp-Session-Id":this.#r}})}finally{this.#f()}}#u(){if(typeof window>"u"||typeof localStorage>"u")return;const t=localStorage.getItem(`mcp-session-${this.#t}`);if(t)try{return JSON.parse(t)}catch(r){console.error("[SimpleClient] Failed to parse stored session:",r);return}}#c(t,r){if(typeof window>"u"||typeof localStorage>"u")return;const s={sessionId:t,initializeResult:r};localStorage.setItem(`mcp-session-${this.#t}`,JSON.stringify(s))}#f(){typeof window>"u"||typeof localStorage>"u"||(localStorage.removeItem(`mcp-session-${this.#t}`),this.#r=void 0,this.#a=void 0,this.#e&&(this.#e.close(),this.#e=void 0),this.#s.clear())}async getSessionDetails(){return{id:await this.#l(),initializeResult:this.#a}}async#d(){return this.#n?this.#n:(this.#n=(async()=>{try{const t={jsonrpc:"2.0",id:crypto.randomUUID(),method:"initialize",params:{protocolVersion:"2024-11-05",capabilities:{},clientInfo:{name:"nanobot-ui",version:"0.0.1"}}},r=await this.#i(this.#t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error(`Initialize failed: ${r.status} ${r.statusText}`);const s=r.headers.get("Mcp-Session-Id");if(!s)throw new Error("No Mcp-Session-Id header in initialize response");const i=await r.json();if(i.error)throw new Error(`Initialize error: ${i.error.message}`);this.#r=s,this.#a=i.result,this.#o||this.#c(s,this.#a);const a={jsonrpc:"2.0",id:crypto.randomUUID(),method:"notifications/initialized",params:{}},n=await this.#i(this.#t,{method:"POST",headers:{"Content-Type":"application/json","Mcp-Session-Id":s},body:JSON.stringify(a)});if(!n.ok)throw new Error(`Initialized notification failed: ${n.status} ${n.statusText}`)}finally{this.#n=void 0}})(),this.#n)}async#l(){if(this.#r||await this.#d(),!this.#r)throw new Error("Failed to establish session");return this.#r}async reply(t,r){const s=await this.#l(),i=await this.#i(this.#t,{method:"POST",headers:{"Content-Type":"application/json","Mcp-Session-Id":s},body:JSON.stringify({jsonrpc:"2.0",id:t,result:r})});if(!(i.status===204||i.status===202)){if(!i.ok){const a=await i.text();throw q(`reply: ${i.status}: ${i.statusText}: ${a}`),new Error(a)}try{const a=await i.json();if(a.error?.message)throw q(a.error.message),new Error(a.error.message)}catch(a){if(a instanceof Error&&a.message!=="Unexpected end of JSON input")throw a;console.debug("[SimpleClient] Error parsing JSON in reply:",a)}}}async exchange(t,r,s){const i=await this.#l(),a={jsonrpc:"2.0",id:crypto.randomUUID(),method:t,params:r},[n,o]=this.#t.split("?"),h=new URLSearchParams(o||"");h.set("method",t),t==="tools/call"&&r&&typeof r=="object"&&"name"in r&&h.set("toolcallname",String(r.name));const l=`${n}?${h.toString()}`,v=await this.#i(l,{method:"POST",headers:{"Content-Type":"application/json","Mcp-Session-Id":i},signal:s?.abort?.signal,body:JSON.stringify(a)});if(v.status===404){if(this.#o)throw new Error("Session not found (404). External sessions cannot be recreated.");return this.#f(),this.exchange(t,r,{abort:s?.abort})}if(!v.ok){const c=await v.text();throw q(`exchange: ${v.status}: ${v.statusText}: ${c}`),new Error(c)}const g=await v.json();if(g.error)throw q(g.error.message),new Error(g.error.message);return g.result}async callMCPTool(t,r){const s=await this.exchange("tools/call",{name:t,arguments:r?.payload||{},...r?.async&&{_meta:{"ai.nanobot.async":!0,progressToken:r?.progressToken}}},{abort:r?.abort});return s&&typeof s=="object"&&"structuredContent"in s?s.structuredContent:s}async listResources(t){return await this.exchange("resources/list",{...t?.prefix&&{_meta:{"ai.nanobot":{prefix:t.prefix}}}},{abort:t?.abort})}async#h(){if(this.#e&&this.#e.readyState!==EventSource.CLOSED)return;await this.#l();const[t,r]=this.#t.split("?"),s=new URLSearchParams(r||"");s.set("stream","true");const i=`${t}?${s.toString()}`;this.#e=new EventSource(i),this.#e.onmessage=a=>{try{const n=JSON.parse(a.data);if(n.method==="notifications/resources/updated"&&n.params?.uri){const o=n.params.uri;for(const[h,l]of this.#s.entries())o.startsWith(h)&&this.#v(o).then(v=>{v&&l.forEach(g=>g(v))})}}catch(n){console.error("[SimpleClient] Failed to parse SSE message:",n)}},this.#e.onerror=a=>{console.error("[SimpleClient] SSE connection error:",a)},this.#e.onopen=()=>{console.log("[SimpleClient] SSE connection established")}}async#v(t){try{const r=await this.exchange("resources/read",{uri:t});if(r.resources?.length)return r.resources[0]}catch(r){q(`[SimpleClient] Failed to fetch resource ${t}: ${r instanceof Error?r.message:String(r)}`)}return null}watchResource(t,r){return this.#s.has(t)||this.#s.set(t,new Set),this.#s.get(t).add(r),this.#h().then(async()=>{try{await this.exchange("resources/subscribe",{uri:t}),console.log(`[SimpleClient] Subscribed to resources with prefix: ${t}`)}catch(s){console.error(`[SimpleClient] Failed to subscribe to ${t}:`,s)}}),()=>{const s=this.#s.get(t);s&&(s.delete(r),s.size===0&&(this.#s.delete(t),this.exchange("resources/unsubscribe",{uri:t}).catch(i=>{console.error(`[SimpleClient] Failed to unsubscribe from ${t}:`,i)}))),console.log(`[SimpleClient] Stopped watching resources with prefix: ${t}`),this.#s.size===0&&this.#e&&(this.#e.close(),this.#e=void 0)}}}export{er as I,vr as S,tr as U,dr as W,cr as X,xt as a,fr as b,ur as c,nr as d,qt as e,Kt as f,rr as g,hr as h,Dt as i,Jt as j,lr as k,or as r,Y as s};
