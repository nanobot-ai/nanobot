import{W as oe,P as Y,aC as Ee,D as q,n as m,F as Te,v as ie,i as A,ac as Ke,R as Qe,T as Xe,U as de,V as $,y as k,C as Ge,aD as Ze,X as R,_ as et,aE as B,aF as K,Y as P,aG as he,a3 as tt,az as ve,aH as Ce,aI as Ie,a0 as le,a1 as Ne,aJ as rt,aK as G,q as st,aL as L,aM as it,z as at,aN as nt,aO as ot,aP as lt,w as Ae,aQ as ft,Q as ut,aR as ct,B as dt,aS as ht,aT as ge,e as fe,aU as vt,aV as gt,a6 as _t,aW as ue,aX as pt,aY as bt,aZ as St,a_ as wt,a$ as yt,b0 as mt,b1 as Et,b2 as Tt,ap as Ct,b3 as It,b4 as Nt,Z as At,b5 as kt,b6 as Ot,b7 as Mt,ax as $t,u as ke,r as Oe,b8 as Pt,p as Me,aq as Rt,an as $e,g as ae,c as Pe,l as Lt,s as Dt,a2 as Re,m as zt,d as Le,f as De,j as ze,b9 as Ut,ao as jt,ba as _e,bb as pe,a8 as Wt,bc as qt,bd as Ft}from"./DO59wc33.js";import"./DsnmJJEf.js";import{p as z,r as Ue,s as Ht}from"./ik-EZS2y.js";function Vt(e,t){return t}function Jt(e,t,r){for(var s=e.items,i=[],a=t.length,n=0;n<a;n++)nt(t[n].e,i,!0);var o=a>0&&i.length===0&&r!==null;if(o){var h=r.parentNode;ot(h),h.append(r),s.clear(),N(e,t[0].prev,t[a-1].next)}lt(i,()=>{for(var l=0;l<a;l++){var v=t[l];o||(s.delete(v.k),N(e,v.prev,v.next)),L(v.e,!o)}})}function xt(e,t,r,s,i,a=null){var n=e,o={flags:t,items:new Map,first:null},h=(t&Ee)!==0;if(h){var l=e;n=m?q(Te(l)):l.appendChild(oe())}m&&ie();var v=null,g=!1,c=new Map,E=Ke(()=>{var b=r();return Ie(b)?b:b==null?[]:Ce(b)}),f,_;function S(){Yt(_,f,o,c,n,i,t,s,r),a!==null&&(f.length===0?v?le(v):v=R(()=>a(n)):v!==null&&Ne(v,()=>{v=null}))}Y(()=>{_??=Ae,f=A(E);var b=f.length;if(g&&b===0)return;g=b===0;let T=!1;if(m){var p=Qe(n)===Xe;p!==(b===0)&&(n=de(),q(n),$(!1),T=!0)}if(m){for(var w=null,y,u=0;u<b;u++){if(k.nodeType===Ge&&k.data===Ze){n=k,T=!0,$(!1);break}var d=f[u],C=s(d,u);y=ne(k,o,w,null,d,C,u,i,t,r),o.items.set(C,y),w=y}b>0&&q(de())}if(m)b===0&&a&&(v=R(()=>a(n)));else if(et()){var O=new Set,H=P;for(u=0;u<b;u+=1){d=f[u],C=s(d,u);var M=o.items.get(C)??c.get(C);M?(t&(B|K))!==0&&je(M,d,u,t):(y=ne(null,o,null,null,d,C,u,i,t,r,!0),c.set(C,y)),O.add(C)}for(const[I,V]of o.items)O.has(I)||H.skipped_effects.add(V.e);H.add_callback(S)}else S();T&&$(!0),A(E)}),m&&(n=k)}function Yt(e,t,r,s,i,a,n,o,h){var l=(n&it)!==0,v=(n&(B|K))!==0,g=t.length,c=r.items,E=r.first,f=E,_,S=null,b,T=[],p=[],w,y,u,d;if(l)for(d=0;d<g;d+=1)w=t[d],y=o(w,d),u=c.get(y),u!==void 0&&(u.a?.measure(),(b??=new Set).add(u));for(d=0;d<g;d+=1){if(w=t[d],y=o(w,d),u=c.get(y),u===void 0){var C=s.get(y);if(C!==void 0){s.delete(y),c.set(y,C);var O=S?S.next:f;N(r,S,C),N(r,C,O),Z(C,O,i),S=C}else{var H=f?f.e.nodes_start:i;S=ne(H,r,S,S===null?r.first:S.next,w,y,d,a,n,h)}c.set(y,S),T=[],p=[],f=S.next;continue}if(v&&je(u,w,d,n),(u.e.f&G)!==0&&(le(u.e),l&&(u.a?.unfix(),(b??=new Set).delete(u))),u!==f){if(_!==void 0&&_.has(u)){if(T.length<p.length){var M=p[0],I;S=M.prev;var V=T[0],Q=T[T.length-1];for(I=0;I<T.length;I+=1)Z(T[I],M,i);for(I=0;I<p.length;I+=1)_.delete(p[I]);N(r,V.prev,Q.next),N(r,S,V),N(r,Q,M),f=M,S=Q,d-=1,T=[],p=[]}else _.delete(u),Z(u,f,i),N(r,u.prev,u.next),N(r,u,S===null?r.first:S.next),N(r,S,u),S=u;continue}for(T=[],p=[];f!==null&&f.k!==y;)(f.e.f&G)===0&&(_??=new Set).add(f),p.push(f),f=f.next;if(f===null)continue;u=f}T.push(u),S=u,f=u.next}if(f!==null||_!==void 0){for(var D=_===void 0?[]:Ce(_);f!==null;)(f.e.f&G)===0&&D.push(f),f=f.next;var X=D.length;if(X>0){var Ye=(n&Ee)!==0&&g===0?i:null;if(l){for(d=0;d<X;d+=1)D[d].a?.measure();for(d=0;d<X;d+=1)D[d].a?.fix()}Jt(r,D,Ye)}}l&&st(()=>{if(b!==void 0)for(u of b)u.a?.apply()}),e.first=r.first&&r.first.e,e.last=S&&S.e;for(var Be of s.values())L(Be.e);s.clear()}function je(e,t,r,s){(s&B)!==0&&he(e.v,t),(s&K)!==0?he(e.i,r):e.i=r}function ne(e,t,r,s,i,a,n,o,h,l,v){var g=(h&B)!==0,c=(h&rt)===0,E=g?c?tt(i,!1,!1):ve(i):i,f=(h&K)===0?n:ve(n),_={i:f,v:E,k:a,a:null,e:null,prev:r,next:s};try{if(e===null){var S=document.createDocumentFragment();S.append(e=oe())}return _.e=R(()=>o(e,E,f,l),m),_.e.prev=r&&r.e,_.e.next=s&&s.e,r===null?v||(t.first=_):(r.next=_,r.e.next=_.e),s!==null&&(s.prev=_,s.e.prev=_.e),_}finally{}}function Z(e,t,r){for(var s=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==null&&a!==s;){var n=at(a);i.before(a),a=n}}function N(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Bt(e,t,r,s,i,a){let n=m;m&&ie();var o,h,l=null;m&&k.nodeType===ft&&(l=k,ie());var v=m?k:e,g;Y(()=>{const c=t()||null;var E=ct;c!==o&&(g&&(c===null?Ne(g,()=>{g=null,h=null}):c===h?le(g):(L(g),ge(!1))),c&&c!==h&&(g=R(()=>{if(l=m?l:document.createElementNS(E,c),dt(l,l),s){m&&ht(c)&&l.append(document.createComment(""));var f=m?Te(l):l.appendChild(oe());m&&(f===null?$(!1):q(f)),s(l,f)}Ae.nodes_end=l,v.before(l)})),o=c,o&&(h=o),ge(!0))},ut),n&&($(!0),q(v))}function Kt(e,t){var r=void 0,s;Y(()=>{r!==(r=t())&&(s&&(L(s),s=null),r&&(s=R(()=>{fe(()=>r(e))})))})}function We(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=We(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function Qt(){for(var e,t,r=0,s="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=We(e))&&(s&&(s+=" "),s+=t);return s}function Xt(e){return typeof e=="object"?Qt(e):e??""}const be=[...` 	
\r\fÂ \v\uFEFF`];function Gt(e,t,r){var s=e==null?"":""+e;if(r){for(var i in r)if(r[i])s=s?s+" "+i:i;else if(s.length)for(var a=i.length,n=0;(n=s.indexOf(i,n))>=0;){var o=n+a;(n===0||be.includes(s[n-1]))&&(o===s.length||be.includes(s[o]))?s=(n===0?"":s.substring(0,n))+s.substring(o+1):n=o}}return s===""?null:s}function Se(e,t=!1){var r=t?" !important;":";",s="";for(var i in e){var a=e[i];a!=null&&a!==""&&(s+=" "+i+": "+a+r)}return s}function ee(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Zt(e,t){if(t){var r="",s,i;if(Array.isArray(t)?(s=t[0],i=t[1]):s=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,n=0,o=!1,h=[];s&&h.push(...Object.keys(s).map(ee)),i&&h.push(...Object.keys(i).map(ee));var l=0,v=-1;const _=e.length;for(var g=0;g<_;g++){var c=e[g];if(o?c==="/"&&e[g-1]==="*"&&(o=!1):a?a===c&&(a=!1):c==="/"&&e[g+1]==="*"?o=!0:c==='"'||c==="'"?a=c:c==="("?n++:c===")"&&n--,!o&&a===!1&&n===0){if(c===":"&&v===-1)v=g;else if(c===";"||g===_-1){if(v!==-1){var E=ee(e.substring(l,v).trim());if(!h.includes(E)){c!==";"&&g++;var f=e.substring(l,g).trim();r+=" "+f+";"}}l=g+1,v=-1}}}}return s&&(r+=Se(s)),i&&(r+=Se(i,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function er(e,t,r,s,i,a){var n=e.__className;if(m||n!==r||n===void 0){var o=Gt(r,s,a);(!m||o!==e.getAttribute("class"))&&(o==null?e.removeAttribute("class"):t?e.className=o:e.setAttribute("class",o)),e.__className=r}else if(a&&i!==a)for(var h in a){var l=!!a[h];(i==null||l!==!!i[h])&&e.classList.toggle(h,l)}return a}function te(e,t={},r,s){for(var i in r){var a=r[i];t[i]!==a&&(r[i]==null?e.style.removeProperty(i):e.style.setProperty(i,a,s))}}function tr(e,t,r,s){var i=e.__style;if(m||i!==t){var a=Zt(t,s);(!m||a!==e.getAttribute("style"))&&(a==null?e.removeAttribute("style"):e.style.cssText=a),e.__style=t}else s&&(Array.isArray(s)?(te(e,r?.[0],s[0]),te(e,r?.[1],s[1],"important")):te(e,r,s));return s}function J(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Ie(t))return vt();for(var s of e.options)s.selected=t.includes(F(s));return}for(s of e.options){var i=F(s);if(gt(i,t)){s.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function qe(e){var t=new MutationObserver(()=>{J(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),_t(()=>{t.disconnect()})}function dr(e,t,r=t){var s=!0;ue(e,"change",i=>{var a=i?"[selected]":":checked",n;if(e.multiple)n=[].map.call(e.querySelectorAll(a),F);else{var o=e.querySelector(a)??e.querySelector("option:not([disabled])");n=o&&F(o)}r(n)}),fe(()=>{var i=t();if(J(e,i,s),s&&i===void 0){var a=e.querySelector(":checked");a!==null&&(i=F(a),r(i))}e.__value=i,s=!1}),qe(e)}function F(e){return"__value"in e?e.__value:e.value}const U=Symbol("class"),j=Symbol("style"),Fe=Symbol("is custom element"),He=Symbol("is html");function hr(e){if(m){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var s=e.value;x(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var i=e.checked;x(e,"checked",null),e.checked=i}}};e.__on_r=r,Ot(r),Mt()}}function vr(e,t){var r=ce(e);r.checked!==(r.checked=t??void 0)&&(e.checked=t)}function rr(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function x(e,t,r,s){var i=ce(e);m&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=r)&&(t==="loading"&&(e[bt]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Ve(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function sr(e,t,r,s,i=!1){var a=ce(e),n=a[Fe],o=!a[He];let h=m&&n;h&&$(!1);var l=t||{},v=e.tagName==="OPTION";for(var g in t)g in r||(r[g]=null);r.class?r.class=Xt(r.class):r[U]&&(r.class=null),r[j]&&(r.style??=null);var c=Ve(e);for(const p in r){let w=r[p];if(v&&p==="value"&&w==null){e.value=e.__value="",l[p]=w;continue}if(p==="class"){var E=e.namespaceURI==="http://www.w3.org/1999/xhtml";er(e,E,w,s,t?.[U],r[U]),l[p]=w,l[U]=r[U];continue}if(p==="style"){tr(e,w,t?.[j],r[j]),l[p]=w,l[j]=r[j];continue}var f=l[p];if(!(w===f&&!(w===void 0&&e.hasAttribute(p)))){l[p]=w;var _=p[0]+p[1];if(_!=="$$")if(_==="on"){const y={},u="$$"+p;let d=p.slice(2);var S=kt(d);if(Et(d)&&(d=d.slice(0,-7),y.capture=!0),!S&&f){if(w!=null)continue;e.removeEventListener(d,l[u],y),l[u]=null}if(w!=null)if(S)e[`__${d}`]=w,Ct([d]);else{let C=function(O){l[p].call(this,O)};l[u]=Tt(d,e,C,y)}else S&&(e[`__${d}`]=void 0)}else if(p==="style")x(e,p,w);else if(p==="autofocus")It(e,!!w);else if(!n&&(p==="__value"||p==="value"&&w!=null))e.value=e.__value=w;else if(p==="selected"&&v)rr(e,w);else{var b=p;o||(b=Nt(b));var T=b==="defaultValue"||b==="defaultChecked";if(w==null&&!n&&!T)if(a[p]=null,b==="value"||b==="checked"){let y=e;const u=t===void 0;if(b==="value"){let d=y.defaultValue;y.removeAttribute(b),y.defaultValue=d,y.value=y.__value=u?d:null}else{let d=y.defaultChecked;y.removeAttribute(b),y.defaultChecked=d,y.checked=u?d:!1}}else e.removeAttribute(p);else T||c.includes(b)&&(n||typeof w!="string")?(e[b]=w,b in a&&(a[b]=At)):typeof w!="function"&&x(e,b,w)}}}return h&&$(!0),l}function we(e,t,r=[],s=[],i,a=!1){pt(r,s,n=>{var o=void 0,h={},l=e.nodeName==="SELECT",v=!1;if(Y(()=>{var c=t(...n.map(A)),E=sr(e,o,c,i,a);v&&l&&"value"in c&&J(e,c.value);for(let _ of Object.getOwnPropertySymbols(h))c[_]||L(h[_]);for(let _ of Object.getOwnPropertySymbols(c)){var f=c[_];_.description===yt&&(!o||f!==o[_])&&(h[_]&&L(h[_]),h[_]=R(()=>Kt(e,()=>f))),E[_]=f}o=E}),l){var g=e;fe(()=>{J(g,o.value,!0),qe(g)})}v=!0})}function ce(e){return e.__attributes??={[Fe]:e.nodeName.includes("-"),[He]:e.namespaceURI===St}}var ye=new Map;function Ve(e){var t=e.getAttribute("is")||e.nodeName,r=ye.get(t);if(r)return r;ye.set(t,r=[]);for(var s,i=e,a=Element.prototype;a!==i;){s=mt(i);for(var n in s)s[n].set&&r.push(n);i=wt(i)}return r}function gr(e,t,r=t){var s=new WeakSet;ue(e,"input",async i=>{var a=i?e.defaultValue:e.value;if(a=re(e)?se(a):a,r(a),P!==null&&s.add(P),await $t(),a!==(a=t())){var n=e.selectionStart,o=e.selectionEnd;e.value=a??"",o!==null&&(e.selectionStart=n,e.selectionEnd=Math.min(o,e.value.length))}}),(m&&e.defaultValue!==e.value||ke(t)==null&&e.value)&&(r(re(e)?se(e.value):e.value),P!==null&&s.add(P)),Oe(()=>{var i=t();if(e===document.activeElement){var a=Pt??P;if(s.has(a))return}re(e)&&i===se(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function _r(e,t,r=t){ue(e,"change",s=>{var i=s?e.defaultChecked:e.checked;r(i)}),(m&&e.defaultChecked!==e.checked||ke(t)==null)&&r(e.checked),Oe(()=>{var s=t();e.checked=!!s})}function re(e){var t=e.type;return t==="number"||t==="range"}function se(e){return e===""?null:+e}/**
 * @license @lucide/svelte v0.540.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 * ---
 * 
 * The MIT License (MIT) (for portions derived from Feather)
 * 
 * Copyright (c) 2013-2023 Cole Bemis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const ir={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var ar=Rt("<svg><!><!></svg>");function nr(e,t){Me(t,!0);const r=z(t,"color",3,"currentColor"),s=z(t,"size",3,24),i=z(t,"strokeWidth",3,2),a=z(t,"absoluteStrokeWidth",3,!1),n=z(t,"iconNode",19,()=>[]),o=Ue(t,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var h=ar();we(h,g=>({...ir,...o,width:s(),height:s(),stroke:r(),"stroke-width":g,class:["lucide-icon lucide",t.name&&`lucide-${t.name}`,t.class]}),[()=>a()?Number(i())*24/Number(s()):i()]);var l=Lt(h);xt(l,17,n,Vt,(g,c)=>{var E=ze(()=>Ut(A(c),2));let f=()=>A(E)[0],_=()=>A(E)[1];var S=Le(),b=De(S);Bt(b,f,!0,(T,p)=>{we(T,()=>({..._()}))}),ae(g,S)});var v=Dt(l);$e(v,()=>t.children??Re),zt(h),ae(e,h),Pe()}function pr(e,t){Me(t,!0);/**
 * @license @lucide/svelte v0.540.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Ue(t,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];nr(e,Ht({name:"x"},()=>r,{get iconNode(){return s},children:(i,a)=>{var n=Le(),o=De(n);$e(o,()=>t.children??Re),ae(i,n)},$$slots:{default:!0}})),Pe()}const br="application/vnd.nanobot.workspace+json",or="/mcp?ui";var me=!1;class Je extends Date{#e=jt(super.getTime());#s=new Map;#r=_e;constructor(...t){super(...t),me||this.#a()}#a(){me=!0;var t=Je.prototype,r=Date.prototype,s=Object.getOwnPropertyNames(r);for(const i of s)(i.startsWith("get")||i.startsWith("to")||i==="valueOf")&&(t[i]=function(...a){if(a.length>0)return A(this.#e),r[i].apply(this,a);var n=this.#s.get(i);if(n===void 0){const o=_e;pe(this.#r),n=ze(()=>(A(this.#e),r[i].apply(this,a))),this.#s.set(i,n),pe(o)}return A(n)}),i.startsWith("set")&&(t[i]=function(...a){var n=r[i].apply(this,a);return Wt(this.#e,r.getTime.call(this)),n})}}const xe=Symbol("notifications");function Sr(e){Ft(xe,e)}function lr(){return qt(xe)}function W(e){try{lr().error("API Error",e?.toString())}catch{console.error("MCP Tool Error:",e)}console.error("Error:",e)}class wr{#e;#s;#r;#a;#n;#o;#t;#i=new Map;constructor(t){const r=t?.baseUrl||"",s=t?.path||or;if(this.#e=`${r}${s}`,this.#s=t?.fetcher||fetch,t?.sessionId)this.#r=t.sessionId==="new"?void 0:t.sessionId,this.#o=!0;else{const i=this.#u();i&&(this.#r=i.sessionId,this.#a=i.initializeResult),this.#o=!1}}async deleteSession(){try{if(!this.#r)return;await this.#s(this.#e,{method:"DELETE",headers:{"Mcp-Session-Id":this.#r}})}finally{this.#f()}}#u(){if(typeof window>"u"||typeof localStorage>"u")return;const t=localStorage.getItem(`mcp-session-${this.#e}`);if(t)try{return JSON.parse(t)}catch(r){console.error("[SimpleClient] Failed to parse stored session:",r);return}}#c(t,r){if(typeof window>"u"||typeof localStorage>"u")return;const s={sessionId:t,initializeResult:r};localStorage.setItem(`mcp-session-${this.#e}`,JSON.stringify(s))}#f(){typeof window>"u"||typeof localStorage>"u"||(localStorage.removeItem(`mcp-session-${this.#e}`),this.#r=void 0,this.#a=void 0,this.#t&&(this.#t.close(),this.#t=void 0),this.#i.clear())}async getSessionDetails(){return{id:await this.#l(),initializeResult:this.#a}}async#d(){return this.#n?this.#n:(this.#n=(async()=>{try{const t={jsonrpc:"2.0",id:crypto.randomUUID(),method:"initialize",params:{protocolVersion:"2024-11-05",capabilities:{},clientInfo:{name:"nanobot-ui",version:"0.0.1"}}},r=await this.#s(this.#e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error(`Initialize failed: ${r.status} ${r.statusText}`);const s=r.headers.get("Mcp-Session-Id");if(!s)throw new Error("No Mcp-Session-Id header in initialize response");const i=await r.json();if(i.error)throw new Error(`Initialize error: ${i.error.message}`);this.#r=s,this.#a=i.result,this.#o||this.#c(s,this.#a);const a={jsonrpc:"2.0",id:crypto.randomUUID(),method:"notifications/initialized",params:{}},n=await this.#s(this.#e,{method:"POST",headers:{"Content-Type":"application/json","Mcp-Session-Id":s},body:JSON.stringify(a)});if(!n.ok)throw new Error(`Initialized notification failed: ${n.status} ${n.statusText}`)}finally{this.#n=void 0}})(),this.#n)}async#l(){if(this.#r||await this.#d(),!this.#r)throw new Error("Failed to establish session");return this.#r}async reply(t,r){const s=await this.#l(),i=await this.#s(this.#e,{method:"POST",headers:{"Content-Type":"application/json","Mcp-Session-Id":s},body:JSON.stringify({jsonrpc:"2.0",id:t,result:r})});if(!(i.status===204||i.status===202)){if(!i.ok){const a=await i.text();throw W(`reply: ${i.status}: ${i.statusText}: ${a}`),new Error(a)}try{const a=await i.json();if(a.error?.message)throw W(a.error.message),new Error(a.error.message)}catch(a){if(a instanceof Error&&a.message!=="Unexpected end of JSON input")throw a;console.debug("[SimpleClient] Error parsing JSON in reply:",a)}}}async exchange(t,r,s){const i=await this.#l(),a={jsonrpc:"2.0",id:crypto.randomUUID(),method:t,params:r},[n,o]=this.#e.split("?"),h=new URLSearchParams(o||"");h.set("method",t),t==="tools/call"&&r&&typeof r=="object"&&"name"in r&&h.set("toolcallname",String(r.name));const l=`${n}?${h.toString()}`,v=await this.#s(l,{method:"POST",headers:{"Content-Type":"application/json","Mcp-Session-Id":i},signal:s?.abort?.signal,body:JSON.stringify(a)});if(v.status===404){if(this.#o)throw new Error("Session not found (404). External sessions cannot be recreated.");return this.#f(),this.exchange(t,r,{abort:s?.abort})}if(!v.ok){const c=await v.text();throw W(`exchange: ${v.status}: ${v.statusText}: ${c}`),new Error(c)}const g=await v.json();if(g.error)throw W(g.error.message),new Error(g.error.message);return g.result}async callMCPTool(t,r){const s=await this.exchange("tools/call",{name:t,arguments:r?.payload||{},...r?.async&&{_meta:{"ai.nanobot.async":!0,progressToken:r?.progressToken}}},{abort:r?.abort});return s&&typeof s=="object"&&"structuredContent"in s?s.structuredContent:s}async listResources(t){const r=await this.exchange("resources/list",{...t?.prefix&&{_meta:{"ai.nanobot":{prefix:t.prefix}}}},{abort:t?.abort});return t?.prefix?{...r,resources:r.resources.filter(({name:s})=>t?.prefix&&s.startsWith(t.prefix))}:r}async#h(){if(this.#t&&this.#t.readyState!==EventSource.CLOSED)return;await this.#l();const[t,r]=this.#e.split("?"),s=new URLSearchParams(r||"");s.set("stream","true");const i=`${t}?${s.toString()}`;this.#t=new EventSource(i),this.#t.onmessage=a=>{try{const n=JSON.parse(a.data);if(n.method==="notifications/resources/updated"&&n.params?.uri){const o=n.params.uri;for(const[h,l]of this.#i.entries())o.startsWith(h)&&this.#v(o).then(v=>{v&&l.forEach(g=>g(v))})}}catch(n){console.error("[SimpleClient] Failed to parse SSE message:",n)}},this.#t.onerror=a=>{console.error("[SimpleClient] SSE connection error:",a)},this.#t.onopen=()=>{console.log("[SimpleClient] SSE connection established")}}async#v(t){try{const r=await this.exchange("resources/read",{uri:t});if(r.resources?.length)return r.resources[0]}catch(r){W(`[SimpleClient] Failed to fetch resource ${t}: ${r instanceof Error?r.message:String(r)}`)}return null}watchResource(t,r){return this.#i.has(t)||this.#i.set(t,new Set),this.#i.get(t).add(r),this.#h().then(async()=>{try{await this.exchange("resources/subscribe",{uri:t}),console.log(`[SimpleClient] Subscribed to resources with prefix: ${t}`)}catch(s){console.error(`[SimpleClient] Failed to subscribe to ${t}:`,s)}}),()=>{const s=this.#i.get(t);s&&(s.delete(r),s.size===0&&(this.#i.delete(t),this.exchange("resources/unsubscribe",{uri:t}).catch(i=>{console.error(`[SimpleClient] Failed to unsubscribe from ${t}:`,i)}))),console.log(`[SimpleClient] Stopped watching resources with prefix: ${t}`),this.#i.size===0&&this.#t&&(this.#t.close(),this.#t=void 0)}}}export{nr as I,wr as S,or as U,br as W,pr as X,Je as a,er as b,gr as c,_r as d,xt as e,dr as f,lr as g,tr as h,Vt as i,Sr as j,Xt as k,vr as l,hr as r,x as s};
