import{c as v,a as c,f as k}from"../chunks/DzEwUWT7.js";import{p as M,f as h,c as x,g as n,h as _,i as F,j as w,a as S,b as C,s as I,d as R,$ as b,e as U}from"../chunks/-O1spnY-.js";import{i as y}from"../chunks/BuMt1Zx9.js";import{C as j,g as E,h as T}from"../chunks/DIPdm855.js";import{p}from"../chunks/CUxF3KSF.js";import{j as D,k as L,M as N,T as W}from"../chunks/b76Qm08X.js";var $=k('<div class="workspace peer m-3 h-[60vh] border-2 border-base-100/30 md:m-0 md:h-dvh md:max-h-dvh md:w-3/4"><!></div>');function q(u,i){M(i,!0);let e=_(()=>{for(const t of i.messages.toReversed())for(const r of(t.items??[]).toReversed())if(r.type==="tool"&&r.output&&r.output?.content){for(const a of r.output.content.toReversed())if(D(a)&&a.resource._meta?.["ai.nanobot.meta/workspace"])return a}return null}),g=_(()=>n(e)?.resource?.text??n(e)?.resource?.blob??"");var s=v(),m=h(s);{var l=t=>{var r=v(),a=h(r);L(a,()=>n(g),f=>{var d=$(),o=F(d);N(o,{get item(){return n(e)},get onSend(){return i.onSendMessage}}),w(d),c(f,d)}),c(t,r)};y(m,t=>{n(g)&&n(e)&&t(l)})}c(u,s),x()}var z=k('<div class="grid grid-cols-1 md:flex md:flex-row"><!> <!></div>');function O(u,i){M(i,!0);const e=p.data.chat||new j,g=E();S(()=>{p.params.id&&e.setChatId(p.params.id).catch(t=>{console.error("Error setting chat ID:",t),g.error(t.message)})}),C(()=>{e.close()});var s=z();T("1c9pa72",t=>{var r=v(),a=h(r);{var f=o=>{R(()=>{b.title=e.agent.name??""})},d=o=>{U(()=>{b.title="Nanobot"})};y(a,o=>{e.agent?.name?o(f):o(d,!1)})}c(t,r)});var m=F(s);q(m,{get messages(){return e.messages},get onSendMessage(){return e.sendMessage}});var l=I(m,2);W(l,{get messages(){return e.messages},get isLoading(){return e.isLoading},get onFileUpload(){return e.uploadFile},get onSendMessage(){return e.sendMessage},get cancelUpload(){return e.cancelUpload},get prompts(){return e.prompts},get resources(){return e.resources},get elicitations(){return e.elicitations},get agent(){return e.agent},get uploadingFiles(){return e.uploadingFiles},get uploadedFiles(){return e.uploadedFiles},get onElicitationResult(){return e.replyToElicitation}}),w(s),c(u,s),x()}export{O as component};
